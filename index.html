<!DOCTYPE html> 
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>La Multi Ani Iubita Mea!</title>
    <style>
        /* RESET AND BASE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #E6E6FA 0%, #FFE6EE 100%);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            color: #4B0082;
            position: relative;
            overflow: hidden;
        }

        /* VARIABLES */
        :root {
            --lavender: #E6E6FA;
            --blush-pink: #FFD1DC;
            --soft-pink: #FFE6EE;
            --white: #FFFFFF;
            --dark-purple: #4B0082;
            --light-purple: #9370DB;
        }

        .container {
            width: 100%;
            height: 100%;
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* COUNTDOWN PAGE */
        .countdown-container {
            background: var(--white);
            border-radius: 20px;
            padding: 20px 15px;
            box-shadow: 0 10px 30px rgba(75, 0, 130, 0.1);
            position: relative;
            overflow: hidden;
            border: 6px solid var(--blush-pink);
            display: none;
            width: 100%;
            max-width: 500px;
        }

        .countdown-container.active {
            display: block;
            animation: fadeIn 1s ease;
        }

        .countdown-title {
            font-family: 'Brush Script MT', cursive;
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--dark-purple);
            line-height: 1.2;
        }

        .countdown-subtitle {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: var(--light-purple);
            font-style: italic;
        }

        .countdown-display {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .countdown-unit {
            background: linear-gradient(145deg, var(--white), var(--lavender));
            border-radius: 12px;
            padding: 15px 8px;
            min-width: 70px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--blush-pink);
        }

        .countdown-number {
            font-family: 'Brush Script MT', cursive;
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--dark-purple);
            line-height: 1;
        }

        .countdown-label {
            font-size: 0.9rem;
            color: var(--light-purple);
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .birthday-date {
            font-size: 1.1rem;
            color: var(--dark-purple);
            margin-top: 15px;
            background: var(--soft-pink);
            display: inline-block;
            padding: 6px 15px;
            border-radius: 40px;
            border: 2px dashed var(--light-purple);
        }

        /* CARDS PAGE - MOBILE FIRST DESIGN */
        .cards-container {
            display: none;
            animation: fadeIn 1s ease;
            width: 100%;
            height: 100%;
            max-width: 500px;
        }

        .cards-container.active {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .birthday-header {
            padding: 15px 0 10px;
            flex-shrink: 0;
        }

        .birthday-title {
            font-family: 'Brush Script MT', cursive;
            font-size: 2.5rem;
            color: var(--dark-purple);
            margin-bottom: 5px;
            line-height: 1.2;
        }

        .birthday-subtitle {
            font-size: 1.2rem;
            color: var(--light-purple);
            font-style: italic;
        }

        .instructions {
            background: var(--white);
            padding: 12px;
            border-radius: 12px;
            margin: 0 auto 15px;
            width: 90%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--blush-pink);
            font-size: 1rem;
            flex-shrink: 0;
        }

        /* MOBILE CARDS GRID - 2-2-1 LAYOUT */
        .cards-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 12px;
            height: calc(100vh - 250px);
            max-height: 500px;
            padding: 0 15px;
            flex: 1;
            overflow: hidden;
        }

        /* Center the last card in the third row */
        .cards-grid .flip-card:nth-child(5) {
            grid-column: span 2;
            justify-self: center;
            width: 50%;
        }

        /* FLIP CARDS - Optimized for mobile grid */
        .flip-card {
            height: 100%;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 12px;
            overflow: hidden;
        }

        .flip-card-front {
            background: linear-gradient(145deg, var(--white), var(--lavender));
            border: 4px solid var(--blush-pink);
            color: var(--dark-purple);
        }

        .flip-card-back {
            background: linear-gradient(145deg, var(--soft-pink), var(--lavender));
            border: 4px solid var(--light-purple);
            color: var(--dark-purple);
            transform: rotateY(180deg);
        }

        /* UPDATED FONT SIZES FOR MOBILE VISIBILITY */
        .week-number {
            font-family: 'Brush Script MT', cursive;
            font-size: 1.7rem; /* Smaller for mobile */
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
            line-height: 1.2;
        }

        .flip-hint {
            font-size: 0.8rem; /* Smaller for mobile */
            color: var(--light-purple);
            margin-top: 8px;
            font-style: italic;
            text-align: center;
            line-height: 1.2;
        }

        .gift-title {
            font-family: 'Brush Script MT', cursive;
            font-size: 1.4rem; /* Smaller for mobile */
            margin-bottom: 8px;
            color: var(--dark-purple);
            text-align: center;
            line-height: 1.2;
            padding: 0 5px;
        }

        .gift-description {
            font-size: 0.9rem; /* Smaller for mobile */
            line-height: 1.3;
            text-align: center;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 4; /* Show more lines on mobile */
            -webkit-box-orient: vertical;
            padding: 0 5px;
            max-height: 70px; /* Prevent overflow */
        }

        .flip-icon {
            font-size: 1.6rem; /* Smaller for mobile */
            color: var(--light-purple);
            margin-bottom: 8px;
        }

        /* FOOTER */
        .footer-note {
            padding: 10px 0;
            color: var(--light-purple);
            font-style: italic;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .reset-button {
            margin: 10px auto;
            padding: 8px 20px;
            background: linear-gradient(to right, var(--light-purple), var(--blush-pink));
            color: white;
            border: none;
            border-radius: 25px;
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            display: none;
            flex-shrink: 0;
        }

        /* BUTTONS */
        .sneak-peek-btn {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background: linear-gradient(145deg, var(--light-purple), var(--blush-pink));
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 15px;
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .dev-override-btn {
            position: fixed;
            bottom: 15px;
            left: 15px;
            background: rgba(75, 0, 130, 0.1);
            color: var(--dark-purple);
            border: 1px dashed var(--dark-purple);
            border-radius: 8px;
            padding: 6px 10px;
            font-family: inherit;
            font-size: 0.7rem;
            cursor: pointer;
            z-index: 1000;
        }

        /* SNEAK PEEK */
        .sneak-peek-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .sneak-peek-overlay.active {
            display: flex;
        }

        .sneak-peek-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            max-width: 90%;
            width: 100%;
            max-height: 80vh;
            position: relative;
            border: 3px solid var(--blush-pink);
        }

        .close-peek {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: var(--dark-purple);
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10001;
        }

        .sneak-peek-title {
            font-family: 'Brush Script MT', cursive;
            font-size: 2rem;
            color: var(--dark-purple);
            margin-bottom: 15px;
        }

        .sneak-peek-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .sneak-peek-card {
            height: 70px;
            background: var(--lavender);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid var(--blush-pink);
            font-size: 1.5rem;
        }

        /* HEARTS */
        .heart {
            position: absolute;
            color: var(--blush-pink);
            font-size: 1rem;
            opacity: 0.7;
            animation: float 6s infinite ease-in-out;
            z-index: 1;
            pointer-events: none;
        }

        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        /* DESKTOP VERSION */
        @media (min-width: 769px) {
            .container {
                padding: 20px;
            }
            
            .countdown-container {
                padding: 30px 25px;
                max-width: 600px;
            }
            
            .countdown-title {
                font-size: 3rem;
            }
            
            .countdown-number {
                font-size: 3rem;
            }
            
            .countdown-unit {
                min-width: 90px;
                padding: 20px 10px;
            }
            
            .cards-container {
                max-width: 800px;
            }
            
            .birthday-title {
                font-size: 3.5rem;
            }
            
            .birthday-subtitle {
                font-size: 1.5rem;
            }
            
            .cards-grid {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: 1fr 1fr;
                height: calc(100vh - 300px);
                max-height: 400px;
                gap: 20px;
                padding: 0 20px;
            }
            
            /* For desktop: 3 columns, 2 rows (3-2) */
            .cards-grid .flip-card:nth-child(4),
            .cards-grid .flip-card:nth-child(5) {
                grid-column: span 1;
                width: 100%;
            }
            
            .cards-grid .flip-card:nth-child(5) {
                grid-column: 2;
            }
            
            /* Larger font sizes for desktop */
            .week-number {
                font-size: 2.2rem;
            }
            
            .gift-title {
                font-size: 1.8rem;
            }
            
            .gift-description {
                font-size: 1.1rem;
                -webkit-line-clamp: 4;
                max-height: none;
            }
            
            .flip-hint {
                font-size: 1rem;
            }
            
            .flip-icon {
                font-size: 2rem;
            }
            
            .sneak-peek-btn {
                bottom: 20px;
                right: 20px;
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .dev-override-btn {
                bottom: 20px;
                left: 20px;
                padding: 8px 12px;
                font-size: 0.8rem;
            }
        }

        /* SMALL PHONES - FURTHER REDUCED FONT SIZES */
        @media (max-width: 380px) {
            .countdown-title {
                font-size: 2rem;
            }
            
            .countdown-number {
                font-size: 1.8rem;
            }
            
            .countdown-unit {
                min-width: 60px;
                padding: 12px 6px;
            }
            
            .birthday-title {
                font-size: 2rem;
            }
            
            .birthday-subtitle {
                font-size: 1rem;
            }
            
            /* Even smaller fonts for very small phones */
            .week-number {
                font-size: 1.4rem;
                margin-bottom: 3px;
            }
            
            .gift-title {
                font-size: 1.2rem;
                margin-bottom: 5px;
                padding: 0 3px;
            }
            
            .gift-description {
                font-size: 0.8rem;
                -webkit-line-clamp: 3;
                line-height: 1.2;
                padding: 0 3px;
                max-height: 60px;
            }
            
            .flip-icon {
                font-size: 1.4rem;
                margin-bottom: 5px;
            }
            
            .flip-hint {
                font-size: 0.7rem;
                margin-top: 5px;
            }
            
            .cards-grid {
                height: calc(100vh - 220px);
                gap: 10px;
                padding: 0 10px;
            }
            
            .flip-card-front, .flip-card-back {
                padding: 8px;
            }
        }

        /* EXTRA SMALL PHONES */
        @media (max-width: 320px) {
            .week-number {
                font-size: 1.3rem;
            }
            
            .gift-title {
                font-size: 1.1rem;
            }
            
            .gift-description {
                font-size: 0.75rem;
                -webkit-line-clamp: 3;
            }
        }

        /* LANDSCAPE MODE */
        @media (orientation: landscape) and (max-height: 500px) {
            .cards-container.active {
                justify-content: flex-start;
            }
            
            .birthday-header {
                padding: 5px 0;
            }
            
            .birthday-title {
                font-size: 1.8rem;
                margin-bottom: 2px;
            }
            
            .birthday-subtitle {
                font-size: 1rem;
            }
            
            .instructions {
                margin-bottom: 8px;
                padding: 8px;
                font-size: 0.9rem;
            }
            
            .cards-grid {
                height: calc(100vh - 150px);
                grid-template-rows: 1fr 1fr;
                gap: 8px;
                padding: 0 10px;
            }
            
            .week-number {
                font-size: 1.3rem;
                margin-bottom: 3px;
            }
            
            .gift-title {
                font-size: 1.1rem;
                margin-bottom: 4px;
            }
            
            .gift-description {
                font-size: 0.75rem;
                -webkit-line-clamp: 2;
                max-height: 40px;
            }
            
            .footer-note {
                padding: 5px 0;
                font-size: 0.8rem;
            }
        }

        /* VERY TALL PHONES */
        @media (min-height: 800px) and (max-width: 768px) {
            .cards-grid {
                height: calc(100vh - 280px);
                max-height: 550px;
            }
            
            /* Slightly larger fonts on tall phones */
            .week-number {
                font-size: 1.8rem;
            }
            
            .gift-title {
                font-size: 1.5rem;
            }
            
            .gift-description {
                font-size: 0.95rem;
                -webkit-line-clamp: 5;
                max-height: 80px;
            }
            
            .flip-icon {
                font-size: 1.8rem;
            }
        }

        /* DYNAMIC FONT ADJUSTMENT FOR CARDS */
        @media (max-height: 600px) and (max-width: 768px) {
            .week-number {
                font-size: 1.5rem;
            }
            
            .gift-title {
                font-size: 1.3rem;
            }
            
            .gift-description {
                font-size: 0.85rem;
                -webkit-line-clamp: 3;
                max-height: 55px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Countdown Section -->
        <div class="countdown-container active" id="countdownContainer">
            <h1 class="countdown-title">Mhmmm, oareee ce se intampla aici?</h1>
            <p class="countdown-subtitle">Te Iubesc</p>
            
            <div class="countdown-display">
                <div class="countdown-unit">
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">Zile</div>
                </div>
                <div class="countdown-unit">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Ore</div>
                </div>
                <div class="countdown-unit">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minute</div>
                </div>
                <div class="countdown-unit">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Secunde</div>
                </div>
            </div>
            
            <div class="birthday-date">
                üéÇ 4 Februarie 2026 ‚ù§Ô∏è
            </div>
        </div>
        
        <!-- Cards Section -->
        <div class="cards-container" id="cardsContainer">
            <div class="birthday-header">
                <h1 class="birthday-title">La mul»õi ani, iubita mea!</h1>
                <p class="birthday-subtitle">Imi doresc sa fii fericita alaturi de mine!!</p>
            </div>
            
            <div class="instructions">
                üéÅ Pick your caaard.
            </div>
            
            <div class="cards-grid" id="cardsGrid">
                <!-- Cards will be added by JavaScript -->
            </div>
            
            <div class="footer-note">
                ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è
            </div>
            
            <button class="reset-button" id="resetButton">ReseteazƒÉ Cardurile</button>
        </div>
    </div>

    <!-- Sneak Peek Button -->
    <button class="sneak-peek-btn" id="sneakPeekBtn">
        üëÄ <span>AruncƒÉ o privire</span>
    </button>

    <!-- Sneak Peek Overlay -->
    <div class="sneak-peek-overlay" id="sneakPeekOverlay">
        <div class="sneak-peek-content">
            <button class="close-peek" id="closePeekBtn">√ó</button>
            <h2 class="sneak-peek-title">Ce surprize te a»ôteaptƒÉ...</h2>
            <div class="sneak-peek-cards">
                <div class="sneak-peek-card">üéÅ</div>
                <div class="sneak-peek-card">üçΩÔ∏è</div>
                <div class="sneak-peek-card">üíÜ‚Äç‚ôÄÔ∏è</div>
                <div class="sneak-peek-card">üéÆ</div>
                <div class="sneak-peek-card">üíù</div>
            </div>
        </div>
    </div>

 

    <script>
        // Gift data
        const gifts = [
            {
                week: "SƒÉptƒÉm√¢na 1",
                title: "CinƒÉ Fancy",
                description: "CinƒÉ Fancy la un restraurant ales de tine"
            },
            {
                week: "SƒÉptƒÉm√¢na 2", 
                title: "Chef Personal",
                description: "GƒÉtesc orice re»õetƒÉ √Æmi ceri!"
            },
            {
                week: "SƒÉptƒÉm√¢na 3",
                title: "3 »òedin»õe Masaj",
                description: "3 »òedin»õe de Masaj Full Body cand vrei tu!"
            },
            {
                week: "SƒÉptƒÉm√¢na 4",
                title: "Liderul √Æn COD",
                description: "Liderul meu √Æn Call of Duty Online (de 5 ori)!"
            },
            {
                week: "SƒÉptƒÉm√¢na 5",
                title: "CƒÉlƒÉtorie SecretƒÉ",
                description: "CƒÉlƒÉtorie √Æn Lumea JucƒÉriilor Secrete!"
            }
        ];

        // Birthday date
        const BIRTHDAY_DATE = new Date('2026-02-04T00:00:00');
        
        // Get DOM elements
        const countdownContainer = document.getElementById('countdownContainer');
        const cardsContainer = document.getElementById('cardsContainer');
        const cardsGrid = document.getElementById('cardsGrid');
        const resetButton = document.getElementById('resetButton');
        const sneakPeekBtn = document.getElementById('sneakPeekBtn');
        const sneakPeekOverlay = document.getElementById('sneakPeekOverlay');
        const closePeekBtn = document.getElementById('closePeekBtn');
        const devOverrideBtn = document.getElementById('devOverrideBtn');
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        // Prevent all scrolling
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        // Prevent pull-to-refresh
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Check if it's birthday time
        function checkBirthday() {
            const now = new Date();
            const isBirthday = now >= BIRTHDAY_DATE;
            
            if (isBirthday) {
                countdownContainer.classList.remove('active');
                cardsContainer.classList.add('active');
                sneakPeekBtn.style.display = 'none';
                devOverrideBtn.style.display = 'none';
                createCards();
                createHearts();
                
                // First visit confetti
                if (!localStorage.getItem('birthdayVisited')) {
                    setTimeout(() => createConfetti(100), 500);
                    localStorage.setItem('birthdayVisited', 'true');
                }
            } else {
                countdownContainer.classList.add('active');
                cardsContainer.classList.remove('active');
                sneakPeekBtn.style.display = 'flex';
                devOverrideBtn.style.display = 'block';
                startCountdown();
                createHearts();
            }
        }
        
        // Create floating hearts
        function createHearts() {
            const body = document.body;
            
            // Remove existing hearts
            document.querySelectorAll('.heart').forEach(heart => heart.remove());
            
            // Add new hearts
            for (let i = 0; i < 8; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '‚ù§';
                
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const delay = Math.random() * 5;
                const duration = 3 + Math.random() * 4;
                
                heart.style.left = left + '%';
                heart.style.top = top + '%';
                heart.style.animationDelay = delay + 's';
                heart.style.animationDuration = duration + 's';
                
                body.appendChild(heart);
            }
        }
        
        // Create confetti
        function createConfetti(count) {
            const colors = ['#FFD1DC', '#E6E6FA', '#9370DB'];
            const body = document.body;
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.style.cssText = `
                    position: fixed;
                    top: -10px;
                    left: ${Math.random() * 100}%;
                    width: 8px;
                    height: 8px;
                    background-color: ${colors[Math.floor(Math.random() * colors.length)]};
                    border-radius: 50%;
                    z-index: 9999;
                    pointer-events: none;
                `;
                
                body.appendChild(confetti);
                
                // Animate
                const animation = confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 2000,
                    easing: 'cubic-bezier(0.1, 0.8, 0.3, 1)'
                });
                
                // Remove after animation
                animation.onfinish = () => confetti.remove();
            }
        }
        
        // Start countdown
        function startCountdown() {
            function update() {
                const now = new Date();
                const diff = BIRTHDAY_DATE - now;
                
                if (diff <= 0) {
                    checkBirthday();
                    return;
                }
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                daysEl.textContent = days.toString().padStart(2, '0');
                hoursEl.textContent = hours.toString().padStart(2, '0');
                minutesEl.textContent = minutes.toString().padStart(2, '0');
                secondsEl.textContent = seconds.toString().padStart(2, '0');
                
                requestAnimationFrame(update);
            }
            
            update();
        }
        
        // Create cards in 2-2-1 grid layout
        function createCards() {
            cardsGrid.innerHTML = '';
            const flippedCards = JSON.parse(localStorage.getItem('flippedCards')) || [];
            
            gifts.forEach((gift, index) => {
                const card = document.createElement('div');
                card.className = 'flip-card';
                if (flippedCards.includes(index)) {
                    card.classList.add('flipped');
                }
                
                card.innerHTML = `
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="flip-icon">üéÅ</div>
                            <div class="week-number">${gift.week}</div>
                            <p class="flip-hint">ApasƒÉ pentru a descoperi</p>
                        </div>
                        <div class="flip-card-back">
                            <h3 class="gift-title">${gift.title}</h3>
                            <p class="gift-description">${gift.description}</p>
                            <div class="flip-icon">üíù</div>
                        </div>
                    </div>
                `;
                
                if (!flippedCards.includes(index)) {
                    // Add both click and touch events
                    card.addEventListener('click', function(e) {
                        e.stopPropagation();
                        flipCard(this, index);
                    });
                    
                    // Touch support for mobile
                    card.addEventListener('touchstart', function(e) {
                        e.stopPropagation();
                        flipCard(this, index);
                    }, { passive: false });
                }
                
                cardsGrid.appendChild(card);
            });
            
            resetButton.style.display = 'block';
            
            // Dynamic font size adjustment based on actual card size
            setTimeout(() => {
                const cards = document.querySelectorAll('.flip-card');
                if (cards.length > 0) {
                    const card = cards[0];
                    const cardHeight = card.offsetHeight;
                    const cardWidth = card.offsetWidth;
                    
                    // Calculate optimal font sizes
                    if (cardHeight < 160 || cardWidth < 140) {
                        // Very small cards
                        adjustCardFontSizes(0.8);
                    } else if (cardHeight < 180 || cardWidth < 160) {
                        // Small cards
                        adjustCardFontSizes(0.9);
                    }
                    // Normal cards use default CSS sizes
                }
            }, 100);
        }
        
        // Helper function to adjust font sizes in cards
        function adjustCardFontSizes(scale) {
            const cards = document.querySelectorAll('.flip-card');
            cards.forEach(card => {
                const weekNum = card.querySelector('.week-number');
                const giftTitle = card.querySelector('.gift-title');
                const giftDesc = card.querySelector('.gift-description');
                const flipHint = card.querySelector('.flip-hint');
                const flipIcon = card.querySelector('.flip-icon');
                
                if (weekNum) {
                    const currentSize = parseFloat(window.getComputedStyle(weekNum).fontSize);
                    weekNum.style.fontSize = (currentSize * scale) + 'px';
                }
                if (giftTitle) {
                    const currentSize = parseFloat(window.getComputedStyle(giftTitle).fontSize);
                    giftTitle.style.fontSize = (currentSize * scale) + 'px';
                }
                if (giftDesc) {
                    const currentSize = parseFloat(window.getComputedStyle(giftDesc).fontSize);
                    giftDesc.style.fontSize = (currentSize * scale) + 'px';
                    
                    // Adjust line clamp based on scale
                    if (scale < 0.85) {
                        giftDesc.style.webkitLineClamp = '3';
                    }
                }
                if (flipHint) {
                    const currentSize = parseFloat(window.getComputedStyle(flipHint).fontSize);
                    flipHint.style.fontSize = (currentSize * scale) + 'px';
                }
                if (flipIcon) {
                    const currentSize = parseFloat(window.getComputedStyle(flipIcon).fontSize);
                    flipIcon.style.fontSize = (currentSize * scale) + 'px';
                }
            });
        }
        
        // Flip card function
        function flipCard(card, index) {
            card.classList.add('flipped');
            
            // Save to localStorage
            const flippedCards = JSON.parse(localStorage.getItem('flippedCards')) || [];
            if (!flippedCards.includes(index)) {
                flippedCards.push(index);
                localStorage.setItem('flippedCards', JSON.stringify(flippedCards));
            }
            
            // Play sound
            playSound();
            
            // Create confetti
            createConfetti(20);
        }
        
        // Play sound
        function playSound() {
            try {
                // Create a simple beep sound
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                
                setTimeout(() => {
                    oscillator.stop();
                    audioContext.close();
                }, 200);
            } catch (e) {
                // Sound not supported, continue silently
            }
        }
        
        // Event Listeners
        sneakPeekBtn.addEventListener('click', () => {
            sneakPeekOverlay.classList.add('active');
        });
        
        sneakPeekBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            sneakPeekOverlay.classList.add('active');
        }, { passive: false });
        
        closePeekBtn.addEventListener('click', () => {
            sneakPeekOverlay.classList.remove('active');
        });
        
        closePeekBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            sneakPeekOverlay.classList.remove('active');
        }, { passive: false });
        
        sneakPeekOverlay.addEventListener('click', (e) => {
            if (e.target === sneakPeekOverlay) {
                sneakPeekOverlay.classList.remove('active');
            }
        });
        
        devOverrideBtn.addEventListener('click', () => {
            if (confirm('Show birthday cards now? (For testing only)')) {
                countdownContainer.classList.remove('active');
                cardsContainer.classList.add('active');
                sneakPeekBtn.style.display = 'none';
                devOverrideBtn.style.display = 'none';
                createCards();
                createHearts();
                createConfetti(100);
            }
        });
        
        resetButton.addEventListener('click', () => {
            localStorage.removeItem('flippedCards');
            localStorage.removeItem('birthdayVisited');
            createCards();
            createConfetti(50);
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkBirthday();
            createHearts();
            
            // Check every 30 seconds
            setInterval(checkBirthday, 30000);
            
            // Handle orientation changes
            window.addEventListener('orientationchange', function() {
                // Refresh after orientation change
                setTimeout(() => {
                    window.scrollTo(0, 0);
                    checkBirthday();
                }, 300);
            });
        });
        
        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                window.scrollTo(0, 0);
                if (cardsContainer.classList.contains('active')) {
                    createCards();
                }
            }, 250);
        });
    </script>
</body>
</html>
